var gcm = require('node-gcm');
function send_text(device_id,phone_number,body){
	// Create a message
	// ... with default values
	var message = new gcm.Message();

	// ... or some given values
	//dryRun=true will give fake_message_id
	var message = new gcm.Message({
	    priority: 'high',
	    contentAvailable: true,
	    delayWhileIdle: true,
	    timeToLive: 3,
	    dryRun: false,
	    data: {
		phone_number: phone_number,
		text_message: body
	    }
	});

	// Set up the sender with you API key
	var sender = new gcm.Sender('<your api key>');

	// Add the registration IDs of the devices you want to send to
	var registrationIds = [];
	registrationIds.push(device_id);
	//registrationIds.push('');
	sender.sendNoRetry(message, { registrationIds: registrationIds }, function(err, result) {
	  if(err) console.log(err);
	  else    console.log(result);
	});

}
module.exports={send_text}
